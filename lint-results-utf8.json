[{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\auth\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\auth\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\common\\LoadingFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\common\\ToastConfig.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\layout\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\components\\layout\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\hooks\\useAuth.ts","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'setLoading', 'setProfile', 'setSession', and 'setUser'. Either include them or remove the dependency array.","line":81,"column":8,"nodeType":"ArrayExpression","endLine":81,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [setLoading, setProfile, setSession, setUser]","fix":{"range":[2713,2715],"text":"[setLoading, setProfile, setSession, setUser]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\hooks\\usePermissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\pages\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\pages\\RegisterCompany.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MapPin' is defined but never used.","line":8,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Phone' is defined but never used.","line":8,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":8,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Users' is defined but never used.","line":8,"column":52,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":57}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { supabase } from '@services/supabase';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { toast } from 'react-hot-toast';\r\nimport { Building2, User, MapPin, Phone, FileText, Users, Briefcase } from 'lucide-react';\r\n\r\nconst registerSchema = z.object({\r\n    // Company Data\r\n    company_name: z.string().min(3, 'El nombre de la empresa es requerido'),\r\n    company_cuit: z.string().min(11, 'CUIT inv├ílido (11 d├¡gitos)'),\r\n    company_fiscal_address: z.string().min(5, 'Direcci├│n fiscal requerida'),\r\n    company_real_address: z.string().min(5, 'Direcci├│n real requerida'),\r\n    company_phone: z.string().min(8, 'Tel├®fono requerido'),\r\n    company_responsable: z.string().min(3, 'Nombre del responsable requerido'),\r\n    company_vat_condition: z.string().min(1, 'Condici├│n de IVA requerida'),\r\n    company_employee_count: z.number().min(1, 'Cantidad de empleados requerida'),\r\n\r\n    // User Data\r\n    full_name: z.string().min(3, 'Nombre completo requerido'),\r\n    email: z.string().email('Email inv├ílido'),\r\n    password: z.string().min(6, 'La contrase├▒a debe tener al menos 6 caracteres'),\r\n    confirmPassword: z.string()\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n    message: \"Las contrase├▒as no coinciden\",\r\n    path: [\"confirmPassword\"],\r\n});\r\n\r\ntype RegisterFormData = z.infer<typeof registerSchema>;\r\n\r\nexport const RegisterCompany = () => {\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const { register, handleSubmit, formState: { errors } } = useForm<RegisterFormData>({\r\n        resolver: zodResolver(registerSchema),\r\n        defaultValues: {\r\n            company_employee_count: 1\r\n        }\r\n    });\r\n\r\n    const onSubmit = async (data: RegisterFormData) => {\r\n        setLoading(true);\r\n        try {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const { data: response, error } = await (supabase as any).rpc('register_tenant', {\r\n                email: data.email,\r\n                password: data.password,\r\n                full_name: data.full_name,\r\n                company_name: data.company_name,\r\n                company_cuit: data.company_cuit,\r\n                company_fiscal_address: data.company_fiscal_address,\r\n                company_real_address: data.company_real_address,\r\n                company_phone: data.company_phone,\r\n                company_responsable: data.company_responsable,\r\n                company_vat_condition: data.company_vat_condition,\r\n                company_employee_count: data.company_employee_count\r\n            }) as {\r\n                data: { access_token: string; refresh_token: string | null };\r\n                error: Error | null;\r\n            };\r\n\r\n            if (error) throw error;\r\n\r\n            // Auto login with the returned token\r\n            const { error: sessionError } = await supabase.auth.setSession({\r\n                access_token: response.access_token,\r\n                refresh_token: response.refresh_token || '',\r\n            });\r\n\r\n            if (sessionError) throw sessionError;\r\n\r\n            toast.success('Empresa registrada exitosamente!');\r\n            navigate('/dashboard');\r\n\r\n        } catch (error: any) {\r\n            console.error('Registration error:', error);\r\n            toast.error(error.message || 'Error al registrar la empresa');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-4xl\">\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <div className=\"bg-blue-600 p-3 rounded-xl shadow-lg\">\r\n                        <Building2 className=\"h-10 w-10 text-white\" />\r\n                    </div>\r\n                </div>\r\n                <h2 className=\"text-center text-3xl font-extrabold text-gray-900\">\r\n                    Registrar Nueva Empresa\r\n                </h2>\r\n                <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n                    Complete los datos de la organizaci├│n y del administrador\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-4xl\">\r\n                <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n                    <form className=\"space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n\r\n                        {/* Secci├│n Empresa */}\r\n                        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\r\n                                <Briefcase className=\"mr-2 h-5 w-5 text-blue-500\" />\r\n                                Datos de la Empresa\r\n                            </h3>\r\n                            <div className=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Raz├│n Social</label>\r\n                                    <input type=\"text\" {...register('company_name')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_name && <p className=\"text-red-500 text-xs mt-1\">{errors.company_name.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">CUIT</label>\r\n                                    <input type=\"text\" {...register('company_cuit')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_cuit && <p className=\"text-red-500 text-xs mt-1\">{errors.company_cuit.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Condici├│n IVA</label>\r\n                                    <select {...register('company_vat_condition')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\">\r\n                                        <option value=\"\">Seleccione...</option>\r\n                                        <option value=\"Responsable Inscripto\">Responsable Inscripto</option>\r\n                                        <option value=\"Monotributo\">Monotributo</option>\r\n                                        <option value=\"Exento\">Exento</option>\r\n                                        <option value=\"Consumidor Final\">Consumidor Final</option>\r\n                                    </select>\r\n                                    {errors.company_vat_condition && <p className=\"text-red-500 text-xs mt-1\">{errors.company_vat_condition.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Cantidad Empleados</label>\r\n                                    <input type=\"number\" {...register('company_employee_count', { valueAsNumber: true })} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_employee_count && <p className=\"text-red-500 text-xs mt-1\">{errors.company_employee_count.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Direcci├│n Fiscal</label>\r\n                                    <input type=\"text\" {...register('company_fiscal_address')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_fiscal_address && <p className=\"text-red-500 text-xs mt-1\">{errors.company_fiscal_address.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Direcci├│n Real</label>\r\n                                    <input type=\"text\" {...register('company_real_address')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_real_address && <p className=\"text-red-500 text-xs mt-1\">{errors.company_real_address.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Tel├®fono</label>\r\n                                    <input type=\"text\" {...register('company_phone')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_phone && <p className=\"text-red-500 text-xs mt-1\">{errors.company_phone.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Responsable</label>\r\n                                    <input type=\"text\" {...register('company_responsable')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.company_responsable && <p className=\"text-red-500 text-xs mt-1\">{errors.company_responsable.message}</p>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Secci├│n Admin */}\r\n                        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                            <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\r\n                                <User className=\"mr-2 h-5 w-5 text-blue-500\" />\r\n                                Datos del Administrador\r\n                            </h3>\r\n                            <div className=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2\">\r\n                                <div className=\"sm:col-span-2\">\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Nombre Completo</label>\r\n                                    <input type=\"text\" {...register('full_name')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.full_name && <p className=\"text-red-500 text-xs mt-1\">{errors.full_name.message}</p>}\r\n                                </div>\r\n\r\n                                <div className=\"sm:col-span-2\">\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n                                    <input type=\"email\" {...register('email')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.email && <p className=\"text-red-500 text-xs mt-1\">{errors.email.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Contrase├▒a</label>\r\n                                    <input type=\"password\" {...register('password')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.password && <p className=\"text-red-500 text-xs mt-1\">{errors.password.message}</p>}\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700\">Confirmar Contrase├▒a</label>\r\n                                    <input type=\"password\" {...register('confirmPassword')} className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\r\n                                    {errors.confirmPassword && <p className=\"text-red-500 text-xs mt-1\">{errors.confirmPassword.message}</p>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading}\r\n                                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\r\n                            >\r\n                                {loading ? 'Registrando...' : 'Registrar Empresa'}\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"text-center mt-4\">\r\n                            <Link to=\"/login\" className=\"text-sm text-blue-600 hover:text-blue-500\">\r\n                                ┬┐Ya tienes cuenta? Iniciar Sesi├│n\r\n                            </Link>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\services\\auth.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\services\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\store\\authStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\types\\database.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\Matias\\Documents\\Proyectos\\iapymes\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
